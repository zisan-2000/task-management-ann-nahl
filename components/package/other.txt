              <div className="space-y-2">
                <Label>Templates</Label>
                <div className="space-y-3">
                  {/* Template Selection Button */}
                  <Button
                    type="button"
                    variant="outline"
                    className="w-full justify-start h-auto min-h-[40px] p-3 bg-transparent"
                    onClick={() => setTemplateSelectionOpen(true)}
                    disabled={loading}
                  >
                    <div className="flex items-center justify-between w-full">
                      <div className="flex items-center gap-2">
                        {selectedTemplateIds.length === 0 ? (
                          <>
                            <Plus className="h-4 w-4" />
                            <span className="text-muted-foreground">Select templates for this package...</span>
                          </>
                        ) : (
                          <>
                            <Edit className="h-4 w-4" />
                            <span>Manage Templates ({selectedTemplateIds.length} selected)</span>
                          </>
                        )}
                      </div>
                    </div>
                  </Button>

                  {/* Selected Templates Display */}
                  {selectedTemplates.length > 0 && (
                    <div className="space-y-2">
                      <div className="text-sm font-medium text-muted-foreground">Selected Templates:</div>
                      <div className="flex flex-wrap gap-2">
                        {selectedTemplates.map((template) => (
                          <Badge key={template.id} variant="secondary" className="text-sm">
                            {template.name}
                            <button
                              type="button"
                              className="ml-2 hover:bg-muted rounded-full p-0.5"
                              onClick={(e) => {
                                e.preventDefault()
                                handleRemoveTemplate(template.id)
                              }}
                              disabled={loading}
                            >
                              <X className="h-3 w-3" />
                            </button>
                          </Badge>
                        ))}
                      </div>
                      <div className="text-xs text-muted-foreground">
                        {selectedTemplateIds.length} template(s) will be included in this package
                      </div>
                    </div>
                  )}
                </div>
              </div>